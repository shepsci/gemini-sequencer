(this.webpackJsonpsequencer64=this.webpackJsonpsequencer64||[]).push([[0],[function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"d",function(){return a}),s.d(e,"c",function(){return o}),s.d(e,"e",function(){return c}),s.d(e,"a",function(){return l});const n="https://drumnickydrum-sequencer.herokuapp.com",a="sequencer64.com",o=5e3,c="https://twitter.com/intent/tweet?text=".concat("Check%20out%20my%20new%20beat%20using%20%23Sequencer64!%20","&url="),l="https://www.facebook.com/sharer/sharer.php?u="},,function(t,e,s){"use strict";var n=s(12),a=s(31),o=s(7),c=s(9),l=s(6),r=s(19),i=s(35);e.a=Object(n.a)({reducer:{assets:r.b,tone:c.a,sequence:a.i,editor:o.e,app:l.b,screen:i.b},middleware:t=>t({})})},,,function(t,e,s){"use strict";s.d(e,"b",function(){return p}),s.d(e,"f",function(){return d}),s.d(e,"d",function(){return S}),s.d(e,"c",function(){return h}),s.d(e,"a",function(){return v}),s.d(e,"e",function(){return f});var n=s(24),a=s(2),o=s(1),c=s.p+"static/media/clickHi.9643c745.mp3",l=s.p+"static/media/clickLow.f5e37169.mp3",r=s(51);window.MediaRecorder&&!window.MediaRecorder.notSupported||(window.MediaRecorder=r.a);const i=async()=>{a.a.dispatch(Object(n.startTone)()),document.removeEventListener("touchstart",i),document.removeEventListener("mousedown",i)};document.addEventListener("touchstart",i),document.addEventListener("mousedown",i);const p=new o.FFT({size:32,normalRange:!0}),d=new o.Recorder,u=new o.Limiter(-18).fan(d,o.Destination),m=new o.Channel({volume:0,pan:0,channelCount:2}).connect(u),S=new o.Channel({volume:0,pan:0,channelCount:2});S.mixer={volume:{getRotaryVal:()=>{let t=4*S.volume.value+100;return t>100&&(t=100),t},setValFromRotary:t=>{S.volume.value=.25*(t-100)},initialVal:100}},S.mixer.reverb=new o.Reverb({decay:2,wet:0}),S.mixer.reverb.getRotaryVal=()=>100*S.mixer.reverb.get().wet,S.mixer.reverb.setValFromRotary=t=>S.mixer.reverb.set({wet:t/100}),S.mixer.filter=new o.Filter(2e4,"lowpass",-48),S.mixer.filter.getRotaryVal=()=>S.mixer.filter.get().frequency/200,S.mixer.filter.setValFromRotary=t=>{let e=100===t?2e4:100*t;S.mixer.filter.set({frequency:e})},S.mixer.warp=new o.PitchShift({pitch:0,wet:0}),S.mixer.warp.getRotaryVal=()=>2*(S.mixer.warp.get().pitch+25),S.mixer.warp.setValFromRotary=t=>{const e=(t-50)/2,s=0===e?0:1;S.mixer.warp.set({pitch:e,wet:s})},S.mixer.crush=new o.BitCrusher({bits:4,wet:0}),S.mixer.crush.getRotaryVal=()=>100*S.mixer.crush.get().wet,S.mixer.crush.setValFromRotary=t=>S.mixer.crush.set({wet:t/100}),S.mixer.distort=new o.Distortion({distortion:.5,wet:0}),S.mixer.distort.getRotaryVal=()=>100*S.mixer.distort.get().wet,S.mixer.distort.setValFromRotary=t=>S.mixer.distort.set({wet:t/100}),S.chain(S.mixer.crush,S.mixer.distort,S.mixer.warp,S.mixer.filter,S.mixer.reverb,m);const h=new o.Channel({volume:0,pan:0,channelCount:2});h.chain(p,S);const v={name:"init",samples:[{}]},f=new o.Sampler({urls:{C1:l,C2:c}}).toDestination()},function(t,e,s){"use strict";s.d(e,"a",function(){return r}),s.d(e,"h",function(){return m}),s.d(e,"f",function(){return S}),s.d(e,"p",function(){return v}),s.d(e,"l",function(){return f}),s.d(e,"k",function(){return y}),s.d(e,"i",function(){return b}),s.d(e,"j",function(){return g}),s.d(e,"o",function(){return k}),s.d(e,"q",function(){return O}),s.d(e,"m",function(){return j}),s.d(e,"r",function(){return w}),s.d(e,"e",function(){return x}),s.d(e,"n",function(){return E}),s.d(e,"g",function(){return T}),s.d(e,"c",function(){return N}),s.d(e,"d",function(){return M});var n=s(3),a=s(12),o=s(2),c=s(11),l=s(50);const r={MARIO:"Mario",JOKER:"Joker",TMNT:"TMNT",LIGHT:"Light"},i={_id:"",username:"",loggedIn:!1};let p;try{p=Object(c.a)("theme")}catch(q){console.error("Error getting theme from local storage",q)}const d={authToken:Object(c.a)("authToken")||null,user:Object(n.a)({},i),fetching:!1,status:{count:0,message:"loading"},flashInfo:!1,confirmation:"",error:"",online:window.navigator.onLine,serviceWorkerActive:!1,theme:p||r.MARIO,log:{count:0,message:""},preparingDownload:!1},u=Object(a.b)({name:"app",initialState:d,reducers:{setAuthToken:(t,e)=>{let{payload:s}=e;t.authToken=s},logout:t=>{t.authToken=null,t.user=Object(n.a)({},i),t.status.count++,t.status.message="Successfully logged out"},setUser:(t,e)=>{let{payload:{user:s,message:n}}=e;t.user=s,t.status.count++,t.status.message=n},setStatus:(t,e)=>{let{payload:s}=e;t.status.count++,t.status.message="".concat(t.status.count,"#").concat(s)},setFlashInfo:(t,e)=>{let{payload:s}=e;t.flashInfo=s},setFetching:(t,e)=>{let{payload:s}=e;t.fetching=s},setConfirmation:(t,e)=>{let{payload:s}=e;t.confirmation=s},setError:(t,e)=>{let{payload:s}=e;t.error=s},setOnline:(t,e)=>{let{payload:s}=e;t.online=s},setServiceWorkerActive:(t,e)=>{let{payload:s}=e;t.serviceWorkerActive=s},setTheme:(t,e)=>{let{payload:s}=e;t.theme=s},setLog:(t,e)=>{let{payload:s}=e;t.log.count++,t.log.message=s},updateSequencesFinally:(t,e)=>{let{payload:{message:s,error:n,confirmation:a}}=e;t.status.count++,t.status.message=s,a&&(t.confirmation=a),n&&(t.error=n),t.fetching=!1},getUserFinally:(t,e)=>{let{payload:{loggedIn:s,_id:n,username:a,message:o}}=e;t.user.loggedIn=s,t.user._id=n,t.user.username=a,t.status.count++,t.status.message=o,t.fetching=!1},setPreparingDownload:(t,e)=>{let{payload:s}=e;t.preparingDownload=s;const n=document.getElementById("preparingPortalTop");s&&n&&(n.style.display="initial"),!s&&n&&(n.style.display="none")}}}),{setAuthToken:m,logout:S,setUser:h,setStatus:v,setFlashInfo:f,setFetching:y,setConfirmation:b,setError:g,setOnline:C,setServiceWorkerActive:k,setTheme:O,setLog:j,updateSequencesFinally:w,getUserFinally:x,setPreparingDownload:E}=u.actions,{saveSequence:T,deleteSequence:N,getUser:M}=l;e.b=u.reducer,window.addEventListener("online",()=>o.a.dispatch(C(!0))),window.addEventListener("offline",()=>o.a.dispatch(C(!1)))},function(t,e,s){"use strict";s.d(e,"c",function(){return o}),s.d(e,"b",function(){return c}),s.d(e,"a",function(){return r}),s.d(e,"d",function(){return d}),s.d(e,"f",function(){return u}),s.d(e,"i",function(){return m}),s.d(e,"g",function(){return S}),s.d(e,"h",function(){return h}),s.d(e,"j",function(){return v}),s.d(e,"k",function(){return f});var n=s(3),a=s(12);const o={INIT:"INIT",TAP:"Play",TAP_RECORD:"Record",PAINT:"PAINT",ERASE:"ERASE",SLICE:"SLICE",COPY:"COPY",MOD_VELOCITY:"velocity",MOD_LENGTH:"length",MOD_PITCH:"pitch"},c={[o.MOD_VELOCITY]:1,[o.MOD_LENGTH]:1,[o.MOD_PITCH]:"C2"},l="Change value then tap cells to apply",r={[o.TAP]:"Tap to play instrument",[o.TAP_RECORD]:"Press record then tap instruments",[o.INIT]:"Select an instrument to edit",[o.MOD_VELOCITY]:l,[o.MOD_LENGTH]:l,[o.MOD_PITCH]:l},i={selectedSample:-1,mode:o.INIT,info:r[o.INIT],mods:Object(n.a)({},c),tapCellById:{},toggleOn:!0},p=Object(a.b)({name:"editor",initialState:i,reducers:{close:t=>{t.selectedSample=i.selectedSample,t.mode=i.mode},edit:(t,e)=>{let{payload:{sample:s}}=e;t.selectedSample=s,t.mode=o.PAINT},setMode:(t,e)=>{let{payload:s}=e;t.mode=s;(t.mode===o.TAP||t.mode===o.TAP_RECORD||t.mode===o.INIT)&&(t.selectedSample=-1)},setInfo:(t,e)=>{let{payload:s}=e;t.info=s},setModVal:(t,e)=>{let{payload:s}=e;t.mods[t.mode]=s},setTapCellById:(t,e)=>{let{payload:{id:s,val:n}}=e;t.tapCellById[s]=n},setToggleOn:(t,e)=>{let{payload:s}=e;t.toggleOn=s}}}),{close:d,edit:u,setMode:m,setInfo:S,setModVal:h,setTapCellById:v,setToggleOn:f}=p.actions;e.e=p.reducer},function(t,e,s){"use strict";s.d(e,"c",function(){return n}),s.d(e,"i",function(){return a}),s.d(e,"a",function(){return o}),s.d(e,"j",function(){return c}),s.d(e,"g",function(){return S}),s.d(e,"d",function(){return y}),s.d(e,"f",function(){return b}),s.d(e,"b",function(){return C}),s.d(e,"h",function(){return k}),s.d(e,"e",function(){return j});const n=t=>{if(!Array.isArray(t))return void console.log("getNoteTally -> pattern is not an array");let e={"-1":{count:0,empty:!0},total:{count:0,empty:!0}};t[0].forEach((t,s)=>{e[s]={count:0,empty:!0}}),t.forEach(t=>{t.forEach((t,s)=>{t.noteOn&&(e[s].count++,e.total.count++)})});for(let s=0;s<t[0].length;s++)e[s].count&&(e[s].empty=!1,e.total.empty=!1);return e},a=(t,e)=>{t[e].count++,t[e].empty=!1,t.total.count++,t.total.empty=!1},o=(t,e)=>{t[e].count--,0===t[e].count&&(t[e].empty=!0),t.total.count--,0===t.total.count&&(t.total.empty=!0)},c=t=>{t.noteOn=!1,t.notes.length=0,t.notes.push(l())},l=()=>({pitch:"C2",velocity:1,length:1}),r=()=>({noteOn:!1,notes:[l()]}),i=()=>{let t=[],e=[];for(let s=0;s<9;s++)e.push(r());for(let s=0;s<64;s++)t.push(Object.assign([],e));return t},p=/S(\d+)/g,d=/s(\d+)/g,u=/p\w#?\d|v\d+(?:\.\d+)?|l\d+(?:\.\d+)?/g,m=/(n1.*)(n2.*)|n1.*$|n2.*$/,S=t=>{const e=i(),s=[];t.forEach((t,n)=>{const a=[];let o=!1;t.forEach((t,s)=>{const c=[],l=e[n][s];t.noteOn!==l.noteOn&&c.push(t.noteOn?"t":"f"),t.notes[0].pitch!==l.notes[0].pitch&&c.push("p"+t.notes[0].pitch),t.notes[0].velocity!==l.notes[0].velocity&&c.push("v"+t.notes[0].velocity),t.notes[0].velocity!==l.notes[0].length&&c.push("l"+t.notes[0].length),t.notes[1]&&c.push("n1"+h(t.notes[1])),t.notes[2]&&c.push("n2"+h(t.notes[2])),c.length>0&&(o=!0,a.push("s".concat(s).concat(c.join(""))))}),o&&s.push("S".concat(n).concat(a.join("")))});return s.join("")||"init"},h=t=>"p".concat(t.pitch,"v").concat(t.velocity,"l").concat(t.length),v=t=>{const e=l(),s=t.match(u);return s&&s.forEach(t=>{switch(t[0]){case"p":e.pitch=t.substr(1);break;case"v":e.velocity=Number(t.substr(1));break;case"l":e.length=Number(t.substr(1))}}),e},f=(t,e)=>{const s=t.split(e),n=[];for(let a=1,o=s.length;a<o;a+=2){let t=[s[a],s[a+1]];n.push(t)}return n},y=t=>{const e=i();if("init"===t)return e;return f(t,p).forEach(t=>{let[s,n]=t;f(n,d).forEach(t=>{let[n,a]=t;e[s][n]=(t=>{let e={noteOn:!1,notes:[]};const s=t.match(m);if(s){let n,a;n=s[1]?v(s[1]):v(s[0]),s[2]&&(a=v(s[2]));const o=t.indexOf("n"),c=t.substr(0,o),l=v(c);e.notes.push(l,n),a&&e.notes.push(a)}else{const s=v(t);e.notes.push(s)}return"t"===t[0]&&(e.noteOn=!0),"f"===t[0]&&(e.noteOn=!1),e})(a)})}),e},b=t=>{const e={volume:76,reverb:0,filter:100,warp:50,crush:0,distort:0},s=[];for(let[n,a]of Object.entries(e)){const e=t[n];a!==e&&s.push(n.substr(0,1),e)}return s.join("")||"init"},g={v:"volume",r:"reverb",f:"filter",w:"warp",c:"crush",d:"distort"},C=t=>{const e={volume:76,reverb:0,filter:100,warp:50,crush:0,distort:0};if("init"===t)return e;const s=t.split(/([a-z]\d+)/g);for(let n of s){if(!n)continue;const[,t,s]=n.split(/([a-z])(\d+)/);e[g[t]]=parseInt(s)}return e},k=t=>{const e=[{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50}],s=[];t.forEach((t,n)=>{let a=[],o=!1;for(let[s,c]of Object.entries(t))e[n][s]!==c&&(a.push(s.substr(0,1),c),o=!0);o&&s.push("S",n,...a)});return s.join("")||"init"},O={v:"vol",p:"pan"},j=t=>{const e=[{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50},{vol:100,pan:50}];if("init"===t)return e;const s=t.split(/S/g);for(let n of s){if(!n)continue;const[,t,s,a]=n.split(/(\d)([v|p])(\d+)/),o=O[s];e[t][o]=parseInt(a)}return e}},function(t,e,s){"use strict";s.d(e,"e",function(){return p}),s.d(e,"h",function(){return d}),s.d(e,"c",function(){return u}),s.d(e,"j",function(){return m}),s.d(e,"d",function(){return S}),s.d(e,"i",function(){return v}),s.d(e,"l",function(){return f}),s.d(e,"n",function(){return y}),s.d(e,"f",function(){return b}),s.d(e,"g",function(){return g}),s.d(e,"b",function(){return k}),s.d(e,"k",function(){return j}),s.d(e,"m",function(){return w});var n=s(12),a=s(1),o=s(15),c=s(24),l=s(2);const r={bufferedKit:null,buffersLoaded:!1,loadingSamples:!1,transportState:a.Transport.state,restarting:!1,step:0,audioContextReady:!1,loadingError:{error:!1,count:0},countIn:"",cycle:1,stopAfterCycle:null},i=Object(n.b)({name:"tone",initialState:r,reducers:{setAudioContextReady:(t,e)=>{let{payload:s}=e;t.audioContextReady=s},setLoadingSamples:(t,e)=>{let{payload:s}=e;t.loadingSamples=s},loadSamplesFinally:(t,e)=>{let{payload:s}=e;t.loadingSamples=s.loadingSamples,t.buffersLoaded=s.buffersLoaded,t.bufferedKit=s.bufferedKit,t.loadingError.error=s.loadingError,s.loadingError?t.loadingError.count++:t.loadingError.count=0},setStep:(t,e)=>{let{payload:s}=e;t.step=s},pauseSequence:t=>{a.Transport.pause(),Object(o.d)(),Object(o.a)(t.step),Object(o.g)(),t.transportState="paused"},setTransportState:(t,e)=>{let{payload:s}=e;t.transportState=s},setRestarting:(t,e)=>{let{payload:s}=e;t.restarting=s},startSequenceFinally:(t,e)=>{let{payload:s}=e;s&&(t.stopAfterCycle=s),t.restarting=!1,t.transportState="started",a.Transport.start(),t.countingIn=!1},stopSequenceFinally:t=>{t.step=0,t.cycle=1,t.stopAfterCycle=null,t.transportState="stopped"},setCountIn:(t,e)=>{let{payload:s}=e;t.countIn=s},setCycle:(t,e)=>{let{payload:s}=e;t.cycle=s}}}),{setAudioContextReady:p,setLoadingSamples:d,loadSamplesFinally:u,setStep:m,pauseSequence:S,setTransportState:h,setRestarting:v,startSequenceFinally:f,stopSequenceFinally:y,setCountIn:b,setCycle:g}=i.actions,{startTone:C,loadSamples:k,schedulePattern:O,startSequence:j,stopSequence:w}=c;e.a=i.reducer,document.addEventListener("keydown",t=>{var e;l.a.getState().tone.buffersLoaded&&"saveSequenceInput"!==(null===(e=t.target)||void 0===e?void 0:e.id)&&"Space"===t.code&&("started"===a.Transport.state?l.a.dispatch(S()):l.a.dispatch(j()))})},,function(t,e,s){"use strict";s.d(e,"a",function(){return n}),s.d(e,"c",function(){return a}),s.d(e,"b",function(){return o}),s.d(e,"d",function(){return c});const n=t=>JSON.parse(localStorage.getItem(t)),a=(t,e)=>localStorage.setItem(t,JSON.stringify(e)),o=t=>JSON.parse(sessionStorage.getItem(t)),c=(t,e)=>sessionStorage.setItem(t,JSON.stringify(e))},,,,function(t,e,s){"use strict";s.d(e,"g",function(){return o}),s.d(e,"d",function(){return c}),s.d(e,"a",function(){return l}),s.d(e,"e",function(){return r}),s.d(e,"b",function(){return i}),s.d(e,"c",function(){return p}),s.d(e,"f",function(){return g}),s.d(e,"h",function(){return C});var n=s(5),a=s(1);const o=()=>{document.querySelectorAll(".flashing").forEach(t=>t.classList.remove("pause"))},c=()=>{document.querySelectorAll(".flashing").forEach(t=>t.classList.add("pause"))},l=t=>{const e=document.getElementById("cell-".concat(t));e&&(e.dataset.cursor="true")},r=(t,e)=>{const s=e-1>0?e-1:t-1,n=(e+1)%t,a=document.getElementById("cell-".concat(e)),o=document.getElementById("cell-".concat(s)),c=document.getElementById("cell-".concat(n));a&&(a.dataset.cursor=!1),o&&(o.dataset.cursor=!1),c&&(c.dataset.cursor=!1)},i=(t,e)=>{a.Draw.schedule(()=>{e.classList.contains("on")?(e.classList.add("pulse"),setTimeout(()=>e.classList.remove("pulse"),0)):(e.classList.add("flash"),setTimeout(()=>e.classList.remove("flash"),0))},t)},p=(t,e)=>{const s=document.querySelectorAll(".sampleBtn"),n=document.querySelectorAll(".mixItem");a.Draw.schedule(()=>{e.forEach((t,e)=>{var a,o;t.noteOn&&(s&&(null===(a=s[e])||void 0===a||a.classList.add("pulse")),n&&(null===(o=n[e])||void 0===o||o.classList.add("pulse")),setTimeout(()=>{var t,a;s&&(null===(t=s[e])||void 0===t||t.classList.remove("pulse")),n&&(null===(a=n[e])||void 0===a||a.classList.remove("pulse"))},0))})},t)};let d,u,m,S,h,v,f;const y=new Array(36);let b;const g=()=>{b||(d=document.querySelectorAll(".freq"),b=!0,requestAnimationFrame(x))},C=()=>{b=!1,setTimeout(()=>{d=document.querySelectorAll(".freq"),d.forEach(t=>{t.style.removeProperty("transform"),t.style.removeProperty("filter"),t.style.removeProperty("opacity")})},20)};let k,O,j=1e3/60,w=Date.now();function x(){k=Date.now(),O=k-w,O>j&&(w=k,u=n.b.getValue(),m=u.reduce((t,e)=>t+e)/u.length,d.forEach((t,e)=>{if(S=e+2,h=100*Math.abs(u[S]+m),v=y[S]+.15,f=h<v?0:h>1?1:h,y[S]=h,f!==v){t.style.transitionDuration=f?"60ms":"1s";let e=t.dataset.scalex;"1"!==e&&(e=.25*f);let s=t.dataset.scaley;"1"!==s&&(s=f);let n="scale(".concat(e,", ").concat(s,")");t.style.transform=n,t.style.opacity=f+.5}})),b&&requestAnimationFrame(x)}},,function(t,e,s){"use strict";s.d(e,"a",function(){return n}),s.d(e,"b",function(){return a});const n={_id:"defaultAnalog",name:"analog",kit:"analog",bpm:100,length:64,patternStr:"S0s0ts3tn1pC2v1l1s5tS1s3tS2s3tS3s3tS4s1tS5s3tS6s0ts3tS7s3tS8s3tn1pC2v1l1n2pC2v1l1S9s3tS10s3tS11s0ts3tS12s1ts2tS13s3tS14s3tS15s3tS16s0tS17s3tS18s3tS19s0ts3tS20s1tS21s3tS22s0ts3tS23s0ts3tS25s3tS26s0ts3ts4tS27s3tS28s1ts2tS29s3tS30s3tS31s3tS32s0tS33s3tS34s3tS35s3tS36s1tS37s3tS38s0ts3tS39s3tS41s3tS42s0ts3tS43s3tS44s1ts2tS45s3tS46s3tS47s3tS48s0ts6tS49s3ts6tS50s3tS51s0ts3ts6tS52s1tS53s3ts7tS54s3ts6tS55s1ts3ts7tS56s0tS57s3ts7tS58s0ts1ts3ts4ts7tS59s3ts8tS60s1ts2ts4ts6tS61s0ts1ts3ts7tS62s0ts1ts3ts4ts7ts8tS63s0ts3ts8t",mainMixerStr:"v80",sampleMixerStr:"S6p29S7p38S8p71"},a=[n,{_id:"defaultHouse",name:"house",kit:"house",bpm:120,length:64,patternStr:"S0s0ts1ts6tS1s3tv0.5l1S2s3ts4tS3s3tv0.5l1S4s1ts5tS5s3tS6s3tv0.5l1s4tS7s3tS8s1tS9s3tv0.5l1S10s0ts3ts4tS11s3tv0.5l1s8tS12s1ts2ts5tS13s3tS14s3tv0.5l1s4ts8tv0.5l1S15s3tS16s1tS17s3tv0.5l1S18s3ts4tS19s3tv0.5l1S20s1ts5tS21s3tv0.5l1S22s3ts4ts7tS23s3tv0.5l1s5tv0.5l1S24s1tS25s3tv0.5l1S26s0ts3ts4ts6tS27s3tv0.5l1s8tS28s1ts2ts5tS29s3tv0.5l1S30s3tv0.5l1s4ts8tv0.5l1S31s3tv0.5l1S32s0ts1ts6tS33s3tv0.5l1S34s3ts4tS35s3tv0.5l1S36s1ts5tS37s3tv0.5l1S38s3ts4tS39s3tv0.5l1S40s1tS41s3tv0.5l1S42s0ts3ts4tS43s3tv0.5l1s8tS44s1ts2ts5tS45s3tv0.5l1S46s3ts4ts8tv0.5l1S47s3tv0.5l1S48s1tS49s3tv0.5l1S50s3ts4tS51s3tv0.5l1s6tS52s1ts5tS53s3tv0.5l1S54s3ts4ts6ts7tS55s3tv0.5l1s5tv0.5l1s6tv0.5l1S56s1tS57s3tv0.5l1S58s0ts3ts4ts6tS59s3tv0.5l1s8tS60s1ts2ts5tS61s3tS62s3ts4ts5ts8tv0.5l1S63s3t",mainMixerStr:"v80",sampleMixerStr:"S3p33S4p69S7p23S8p79"},{_id:"defaultBurn",name:"burn",kit:"lush",bpm:80,length:64,patternStr:"S0s0ts1ts3tS2s3tS3s2tS4s3ts5ts8tS5s3tv0.5l1S6s1ts3tS7s3tv0.5l1S8s3tS9s2ts3tv0.5l1S10s1ts3ts4tS12s3ts7ts8tS14s3tS16s0ts1ts3ts6tS17s5tv0.5l1S18s3ts6tS19s2tS20s3ts5ts6ts8tS21s3tv0.5l1s6tv0.5l1S22s1ts3ts6tS23s3tv0.5l1s5tv0.5l1s6tv0.5l1S24s3ts6tS25s2ts3tv0.5l1s5tv0.5l1s6tv0.5l1S26s1ts3ts4ts6tS27s6tv0.5l1S28s3ts6ts7ts8tS30s3tS32s0ts1ts3tS34s3tS35s2tS36s3ts5ts8tS37s3tv0.5l1S38s1ts3tS39s3tv0.5l1S40s3tS41s2ts3tv0.5l1S42s1ts4tS43s3tv0.5l1S44s3ts7ts8tS46s3tS48s0ts1ts3ts6tS49s5tv0.5l1S50s3ts6tS51s1ts2tS52s3ts5ts6ts8tS53s3tv0.5l1s6tv0.5l1S54s1ts3ts5tv0.5l1s6tS55s3tv0.5l1s5tv0.5l1s6tv0.5l1S56s3ts6tS57s2ts3tv0.5l1s5tv0.5l1s6tv0.5l1S58s1ts3ts4ts6tS59s3tv0.5l1s6tv0.5l1S60s3ts6ts7ts8tS61s3tS62s3tS63s3t",mainMixerStr:"v80",sampleMixerStr:"S3p26S6p68"},{_id:"defaultVinyl",name:"vinyl",kit:"vinyl",bpm:90,length:64,patternStr:"S0s0ts1ts7tS1s1tv0.5l1s8tS2s3ts7tS3s1tS4s2ts5ts8tS5s7tv0.5l1S6s0ts3tS7s1ts7tv0.5l1s8tS9s1ts7ts8tS10s0ts3tS11s7tS12s2ts5ts8tS13s7tv0.5l1S14s3ts7tS15s7tv0.5l1S16s0ts1ts7tS17s1tv0.5l1s8tS18s3ts7tS20s2ts5ts8tS21s7tv0.5l1S22s0ts3tS23s7tv0.5l1s8tS25s1ts7ts8tS26s0ts3tS27s7tS28s2ts5ts8tS29s7tv0.5l1S30s3ts7tS31s7tv0.5l1S32s0ts1tS33s1tv0.5l1s8tS34s3tS35s1tS36s2ts5ts8tS38s0ts3tS39s1ts3tv0.5l1s8tS41s3tv0.5l1s8tS42s3tS43s3tv0.5l1S44s2ts3ts5ts8tS46s3tS48s0tS50s3tS52s2ts5ts8tS54s3tS55s3tv0.5l1s8tS56s8tS57s3tv0.5l1s8tS58s0ts3tS60s2ts5ts8t",mainMixerStr:"v80",sampleMixerStr:"S3p23S6v72S7v90"},{_id:"defaultSauce",name:"sauce",kit:"sauce",bpm:120,length:64,patternStr:"S0s0ts5tS2s3tS3s5tS4s1ts3tn1pC2v1l0.085s6tS5s3tpE2n1pE2v1l0.085S6s3tpG2n1pG2v1l0.085s5tS7s3tpC3n1pC3v1l0.085S8s2ts7tpG2S9s5tS10s0tS12s1ts5ts6tS15s5tS18s2tS19s5tS20s1ts6tS22s5tS24s2tS25s5tS26s0tv0.51l1S28s0ts1ts4tpC3s5ts6tS29s4pC3S30s4tpC3s5tS31s4pC3S35s5tS36s1ts6tS38s5tS40s2tS41s5tS42s8tpE2S44s0ts1ts5ts6tS45s0tS46s5ts6ts8pG2S50s2tS51s5tS52s1ts6tS54s5tS56s0ts2tS57s0ts5tS60s0ts1ts4tpC3s5ts6tS61s4pA2s5tS62s4tpF2s5tS63s5t",mainMixerStr:"v80",sampleMixerStr:"S4v72p13S5v55p81"},{_id:"defaultFunky",name:"funky",kit:"punchy",bpm:110,length:64,patternStr:"S0s0ts5tS1s3tS2s2tS3s0tS4s1tS6s4tS7s2tS8s0tS9s3tS10s2tS11s0tS12s1tS15s2ts4tS16s0tS17s3tS18s2tS19s0tS20s1tS21s0tv0.63l1S22s0ts4tS23s1tS24s0tS25s3tS26s2tS27s0tS28s1ts4tS30s4tS31s2tS32s0tS33s3tS34s2tS35s0tS36s1tS38s4tS39s2tS40s0tS41s3tS42s2tS43s0tS44s1tS47s2ts6tn1pC2v1l1S48s0ts6tS49s3tS50s2tS51s0ts6tS52s1tS53s0tv0.63l1s7tn1pC2v1l1S54s0ts4ts7tS55s1tS56s0tS57s3ts8tS58s2tS59s0ts8tv0.59l1S60s1ts4ts8tS61s8tpG1v0.59l1S62s1ts4ts8tpG1S63s1ts8pF1",mainMixerStr:"v80",sampleMixerStr:"S4v88S6v92p27S7v92p37S8p70"},{_id:"defaultSaffron",name:"saffron",kit:"saffron",bpm:90,length:64,patternStr:"S0s0ts1ts3ts6tpC1s7ts8tpC1S2s2ts4ts5ts7tv0.52l0.1675S3s0ts2ts5ts7tv0.52l0.1675S4s3ts7ts8pC1S5s1ts4tS6s1ts5ts7tv0.52l0.1675S7s5ts7tv0.52l0.1675S8s0ts1ts3ts7ts8tpC1S10s4ts5ts7tv0.52l0.1675S11s0ts5ts7tv0.52l0.1675S12s3ts7ts8pC1S13s1ts4tS14s1ts5ts7tv0.52l0.1675S15s5ts7tv0.52l0.1675S16s0ts1ts3ts6pC1s7ts8tpC1S18s2ts4ts5ts7tv0.52l0.1675S19s0ts2ts5ts7tv0.52l0.1675S20s3ts7ts8pC1S21s1ts4tS22s1ts5ts7tv0.52l0.1675S23s5ts7tv0.52l0.1675S24s0ts1ts3ts4ts7ts8tpC1S26s4ts5ts6ts7tv0.52l0.1675S27s0ts5ts7tv0.52l0.1675S28s3ts7ts8pC1S29s1ts4ts6tv0.45l0.1075n1pC2v0.45l0.1075n2pC2v0.45l0.1075S30s1ts5ts6ts7tv0.52l0.1675S31s5ts6pC1s7tv0.52l0.1675S32s0ts1ts3ts6tpC1s7ts8tpC1S34s2ts4ts5ts7tv0.52l0.1675S35s0ts2ts5ts7tv0.52l0.1675S36s3ts7ts8pC1S37s1ts4tS38s1ts5ts7tv0.52l0.1675S39s5ts7tv0.52l0.1675S40s0ts1ts3ts7ts8tpC1S42s4ts5ts7tv0.52l0.1675S43s0ts5ts7tv0.52l0.1675S44s3ts7ts8pC1S45s1ts4tS46s1ts5ts7tv0.52l0.1675S47s5ts6pC1s7tv0.52l0.1675S48s0ts1ts3ts6pC1s7ts8tpC1S50s2ts4ts5ts7tv0.52l0.1675S51s0ts2ts5ts7tv0.52l0.1675S52s3ts7ts8pC1S53s1ts4tS54s1ts5ts7tv0.52l0.1675S55s5ts7tv0.52l0.1675S56s0ts1ts3ts4ts7ts8tpC1S58s4ts5ts6ts7tv0.52l0.1675S59s0ts5ts7tv0.52l0.1675S60s3ts4ts7ts8pC1S61s1ts4ts6tS62s1ts4ts5ts6ts7tv0.52l0.1675S63s5ts6ts7tv0.52l0.1675",mainMixerStr:"v80",sampleMixerStr:"S4v88S6v92p27S7v92p37S8p70"},{_id:"defaultBeatbox",name:"beatbox",kit:"beatbox",bpm:60,length:64,patternStr:"S0s0ts1ts3ts5tS1s3tv0.41l1S2s3ts8tS3s3tv0.41l1S4s2ts3ts4tS5s3tv0.41l1S6s1ts3tS7s3tv0.41l1S8s3tS9s3tv0.41l1S10s3ts8tS11s1ts3tv0.41l1S12s2ts3tn1pC2v1l1n2pC2v1l1s4ts6tS13s3tn1pC2v1l1n2pC2v1l1S14s0tpG1s3tn1pC2v1l1S15s3tn1pC2v1l1S16s0ts1ts3tS17s3tv0.41l1S18s3ts8tS19s3tv0.41l1S20s2ts3ts4tS21s3tv0.41l1S22s1ts3tS23s3tv0.41l1S24s3tS25s3tv0.41l1s4tS26s3ts7ts8tS27s1ts3tv0.41l1S28s2ts3tn1pC2v1l1n2pC2v1l1s4ts6tS29s0tpG1s1ts3tn1pC2v1l1n2pC2v1l1s7tS30s0tpG1s1ts3tn1pC2v1l1S31s3tn1pC2v1l1S32s0ts1ts3tS33s3tv0.41l1S34s3ts8tS35s3tv0.41l1S36s2ts3ts4tS37s3tv0.41l1S38s1ts3tS39s3tv0.41l1S40s3tS41s3tv0.41l1S42s3ts8tS43s1ts3tv0.41l1S44s2ts3tn1pC2v1l1n2pC2v1l1s4ts6tS45s3tn1pC2v1l1n2pC2v1l1S46s0tpA#1s3tn1pC2v1l1S47s3tn1pC2v1l1S48s0tpG#1s1ts3tS49s1ts3tv0.41l1S50s3ts8tS51s1ts3tv0.41l1S52s2ts3ts4tS53s3tv0.41l1S54s0tpG1s3tS55s3tv0.41l1S56s1ts3tS57s3tv0.41l1s4tS58s3ts7ts8tS59s1ts3tv0.41l1S60s2ts3tn1pC2v1l1n2pC2v1l1s4ts6tS61s0tpG1s1ts3tn1pC2v1l1n2pC2v1l1s7tS62s0tpG1s1ts3tn1pC2v1l1S63s3tn1pC2v1l1",mainMixerStr:"v80",sampleMixerStr:"S3v58S4p22S7p82"},{_id:"defaultElectric",name:"electric",kit:"electric",bpm:80,length:64,patternStr:"S0s0ts7tpC1s8tpC1n1pC1v1l0.065S1s4ts8tpG1n1pG1v1l0.065S2s3ts4ts6ts7ts8tpE2n1pE2v1l0.065S3s4ts8tpA#2n1pA#2v1l0.065S4s0ts2ts5ts8tpC1n1pC1v1l0.065S5s4ts6ts7tpC1s8tpG1n1pG1v1l0.065S6s3ts4ts8tpE2n1pE2v1l0.065S7s4ts5ts8tpA#2n1pA#2v1l0.065S8s0ts6ts7tpG#1s8tpC1S9s4ts8tpG#1S10s3ts4ts8tpD#2S11s4ts6ts8tpA#2S12s0ts1ts2ts5ts6ts7tpG1s8tpD1S13s4ts7tpG1s8pG1S14s3ts4ts6ts8tpF1S15s4ts6ts8pB1S16s0ts7tpC1s8tpC1n1pC1v1l0.065S17s4ts8tpG1n1pG1v1l0.065S18s3ts4ts6ts7ts8tpE2n1pE2v1l0.065S19s4ts8tpA#2n1pA#2v1l0.065S20s0ts2ts5ts8tpC1n1pC1v1l0.065S21s4ts6ts7tpC1s8tpG1n1pG1v1l0.065S22s3ts4ts8tpE2n1pE2v1l0.065S23s4ts5ts8tpA#2n1pA#2v1l0.065S24s0ts6ts7tpG#1s8tpC1S25s4ts8tpG#1S26s3ts4ts8tpD#2S27s4ts6ts8tpA#2S28s0ts1ts2ts5ts6ts7tpG1s8tpD1S29s4ts8pG1S30s3ts4ts6ts8tpF1S31s4ts6ts8pB1S32s0ts7tpC1s8tpC1n1pC1v1l0.065S33s4ts8tpG1n1pG1v1l0.065S34s3ts4ts6ts7ts8tpE2n1pE2v1l0.065S35s4ts8tpA#2n1pA#2v1l0.065S36s0ts2ts5ts8tpC1n1pC1v1l0.065S37s4ts6ts7tpC1s8tpG1n1pG1v1l0.065S38s3ts4ts8tpE2n1pE2v1l0.065S39s4ts5ts8tpA#2n1pA#2v1l0.065S40s0ts6ts7tpC1s8tpC1S41s4ts8tpG#1S42s3ts4ts8tpD#2S43s4ts6ts8tpA#2S44s0ts1ts2ts5ts6ts7tpC1s8tpD1S45s4ts8tpG1S46s3ts4ts6ts8tpF1n1pF1v1l0.065n2pF1v1l0.065S47s4ts6ts8tpB1n1pB1v1l0.065n2pB1v1l0.065S48s0ts7tpC1s8tpC1n1pC1v1l0.065S49s4ts8tpC1n1pC1v1l0.065S50s3ts4ts7ts8tpC1n1pC1v1l0.065S51s4ts8tpC1n1pC1v1l0.065S52s0ts2ts5ts8tpC1n1pC1v1l0.065S53s4ts7tpC1s8tpC1n1pC1v1l0.065S54s3ts4ts8tpC1n1pC1v1l0.065S55s4ts5ts8tpC1n1pC1v1l0.065S56s0ts7tpG#1s8tpC1n1pC1v1l0.065n2pC1v1l0.065S57s4ts8tpC1n1pC1v1l0.065n2pC1v1l0.065S58s3ts4ts8tpC1n1pC1v1l0.065n2pC1v1l0.065S59s4ts7ts8tpC1n1pC1v1l0.065n2pC1v1l0.065S60s0ts1ts2ts5ts7tpG1s8pC1S61s4ts8pC1S62s3ts4ts8pC1S63s4ts8pC1",mainMixerStr:"v80",sampleMixerStr:"S2v77S3v53p48S4v78p100S6p0S8v68"}]},,function(t,e,s){"use strict";s.d(e,"a",function(){return N}),s.d(e,"d",function(){return q}),s.d(e,"c",function(){return A}),s.d(e,"e",function(){return K});var n={};s.r(n),s.d(n,"vinyl",function(){return r}),s.d(n,"saffron",function(){return i}),s.d(n,"punchy",function(){return p}),s.d(n,"sauce",function(){return d}),s.d(n,"electric",function(){return u}),s.d(n,"beatbox",function(){return m});var a={};s.r(a),s.d(a,"analog",function(){return k}),s.d(a,"house",function(){return O}),s.d(a,"lush",function(){return j});var o=s(3),c=s(12),l=s(0);const r={name:"vinyl",location:"remote",available:!1,samples:[{name:"kick",path:l.b+"/kits/vinyl/kick.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"kick 2",path:l.b+"/kits/vinyl/kick2.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"kick2"},{name:"snare",path:l.b+"/kits/vinyl/snr.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"snr"},{name:"closed hat",path:l.b+"/kits/vinyl/ch.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"open hat",path:l.b+"/kits/vinyl/oh.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"clap",path:l.b+"/kits/vinyl/clp.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"clp"},{name:"vocal",path:l.b+"/kits/vinyl/voc.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"voc"},{name:"shaker",path:l.b+"/kits/vinyl/shk.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"shk"},{name:"rim",path:l.b+"/kits/vinyl/rim.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"sticks"}]},i={name:"saffron",location:"remote",available:!1,samples:[{name:"stomp",path:l.b+"/kits/saffron/stomp.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"tone",path:l.b+"/kits/saffron/urdu_tone.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"kick2"},{name:"smack",path:l.b+"/kits/saffron/urdu_smack.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"snr"},{name:"clap",path:l.b+"/kits/saffron/clp.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"clp"},{name:"block",path:l.b+"/kits/saffron/plop.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"wb"},{name:"tamb",path:l.b+"/kits/saffron/tamb.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"tamb"},{name:"vocal",path:l.b+"/kits/saffron/voc.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"voc"},{name:"chimes",path:l.b+"/kits/saffron/chimes.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"cym"},{name:"bells",path:l.b+"/kits/saffron/bells.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"fx"}]},p={name:"punchy",location:"remote",available:!1,samples:[{name:"kick",path:l.b+"/kits/punchy/kick.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"snare",path:l.b+"/kits/punchy/snr.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"snr"},{name:"rim",path:l.b+"/kits/punchy/rim.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"wb"},{name:"closed hat",path:l.b+"/kits/punchy/ch.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"open hat",path:l.b+"/kits/punchy/oh.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"cymbal",path:l.b+"/kits/punchy/cym.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"cym"},{name:"high tom",path:l.b+"/kits/punchy/ht.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"tom"},{name:"mid tom",path:l.b+"/kits/punchy/mt.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"tom"},{name:"low tom",path:l.b+"/kits/punchy/lt.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"tom"}]},d={name:"sauce",location:"remote",available:!1,samples:[{name:"kick",path:l.b+"/kits/sauce/kick.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"snare",path:l.b+"/kits/sauce/snr.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"snr"},{name:"snap",path:l.b+"/kits/sauce/snp.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"fx"},{name:"hat 1",path:l.b+"/kits/sauce/ch.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"hat 2",path:l.b+"/kits/sauce/ch2.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"ch"},{name:"hat 3",path:l.b+"/kits/sauce/ch3.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"ch"},{name:"plop",path:l.b+"/kits/sauce/plop.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"wb"},{name:"vocal 1",path:l.b+"/kits/sauce/voc1.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"voc"},{name:"vocal 2",path:l.b+"/kits/sauce/voc2.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"voc"}]},u={name:"electric",location:"remote",available:!1,samples:[{name:"kick",path:l.b+"/kits/electric/kick.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"fat snare",path:l.b+"/kits/electric/fatsnr.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"snr"},{name:"big snare",path:l.b+"/kits/electric/bigsnr.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"snr2"},{name:"hat 1",path:l.b+"/kits/electric/oh.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"oh"},{name:"hat 2",path:l.b+"/kits/electric/oh2.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"clap",path:l.b+"/kits/electric/clp.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"clp"},{name:"tom",path:l.b+"/kits/electric/tom.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"tom"},{name:"tone",path:l.b+"/kits/electric/tone.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"note"},{name:"vocal",path:l.b+"/kits/electric/voc.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"fx"}]},m={name:"beatbox",location:"remote",available:!1,samples:[{name:"kick tone",path:l.b+"/kits/beatbox/kick_tone.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick2"},{name:"kick",path:l.b+"/kits/beatbox/kick.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"kick"},{name:"snare",path:l.b+"/kits/beatbox/snr.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"snr"},{name:"hat",path:l.b+"/kits/beatbox/ch.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"plop",path:l.b+"/kits/beatbox/plop.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"wb"},{name:"cym",path:l.b+"/kits/beatbox/cym.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"cym"},{name:"breath",path:l.b+"/kits/beatbox/breath.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"fx"},{name:"breath2",path:l.b+"/kits/beatbox/breath2.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"fx"},{name:"scratch",path:l.b+"/kits/beatbox/scratch.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"fx"}]};var S=s.p+"static/media/ch.5be36d87.mp3",h=s.p+"static/media/clp.5a324400.mp3",v=s.p+"static/media/cym.658e9d4a.mp3",f=s.p+"static/media/ht.ef5b053d.mp3",y=s.p+"static/media/kick.ea1dad8b.mp3",b=s.p+"static/media/lt.776c7aa4.mp3",g=s.p+"static/media/mt.e91fb3cd.mp3",C=s.p+"static/media/oh.4f702be8.mp3";const k={name:"analog",location:"local",available:!0,samples:[{name:"kick",path:y,code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"snare",path:s.p+"static/media/snr.86309143.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"snr"},{name:"clap",path:h,code:"Numpad9",altCode:"KeyE",color:2,icon:"clp"},{name:"closed hat",path:S,code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"open hat",path:C,code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"cymbal",path:v,code:"Numpad6",altCode:"KeyD",color:5,icon:"cym"},{name:"high tom",path:f,code:"Numpad1",altCode:"KeyZ",color:6,icon:"tom"},{name:"mid tom",path:g,code:"Numpad2",altCode:"KeyX",color:7,icon:"tom"},{name:"low tom",path:b,code:"Numpad3",altCode:"KeyC",color:8,icon:"tom"}]};const O={name:"house",location:"local",available:!0,samples:[{name:"verb kick",path:s.p+"static/media/kick_verb.ed8bb269.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"kick",path:s.p+"static/media/kick.d66d8a66.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"kick"},{name:"snare",path:s.p+"static/media/snr.f27423f3.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"snr"},{name:"shaker",path:s.p+"static/media/shk.a5f2df99.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"shk"},{name:"open hat",path:s.p+"static/media/oh.abae5a0a.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"clap",path:s.p+"static/media/clp.4f0f4170.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"clp"},{name:"vocal",path:s.p+"static/media/voc.57efdf63.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"voc"},{name:"tom",path:s.p+"static/media/tom.4c9f6e58.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"tom"},{name:"low tom",path:s.p+"static/media/low_tom.82c0fc37.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"tom"}]};const j={name:"lush",location:"local",available:!0,samples:[{name:"long kick",path:s.p+"static/media/kick_long.cc243b15.mp3",code:"Numpad7",altCode:"KeyQ",color:0,icon:"kick"},{name:"med kick",path:s.p+"static/media/kick_mid.03a75cf2.mp3",code:"Numpad8",altCode:"KeyW",color:1,icon:"kick"},{name:"short kick",path:s.p+"static/media/kick_short.95cd992a.mp3",code:"Numpad9",altCode:"KeyE",color:2,icon:"kick"},{name:"closed hat",path:s.p+"static/media/ch.9ab7bfc6.mp3",code:"Numpad4",altCode:"KeyA",color:3,icon:"ch"},{name:"open hat",path:s.p+"static/media/oh.e56c7e52.mp3",code:"Numpad5",altCode:"KeyS",color:4,icon:"oh"},{name:"snare",path:s.p+"static/media/snr.089381c7.mp3",code:"Numpad6",altCode:"KeyD",color:5,icon:"snr"},{name:"tambourine",path:s.p+"static/media/tamb.0eec3902.mp3",code:"Numpad1",altCode:"KeyZ",color:6,icon:"tamb"},{name:"plop",path:s.p+"static/media/plop.1d3f6988.mp3",code:"Numpad2",altCode:"KeyX",color:7,icon:"wb"},{name:"clap",path:s.p+"static/media/clp.dc3ccb41.mp3",code:"Numpad3",altCode:"KeyC",color:8,icon:"clp"}]};var w=s(17);const x=t=>{const e={};return Object.entries(t).forEach(t=>{let[s,n]=t;const a=n.samples.map(t=>Object(o.a)({},t));e[s]=Object(o.a)(Object(o.a)({},n),{},{samples:a})}),e},E={kits:Object(o.a)(Object(o.a)({},x(n)),x(a)),defaultSequences:w.b,userSequences:[]},T=Object(c.b)({name:"assets",initialState:E,reducers:{setKits:(t,e)=>{let{payload:s}=e;t.kits=s},setAvailable:(t,e)=>{let{payload:{kit:s,available:n}}=e;t.kits[s].available=n},setSynched:(t,e)=>{let{payload:{_id:s,synched:n}}=e;t.userSequences.find(t=>t._id===s).synched=n},setFetchingSamples:(t,e)=>{let{payload:{kit:s,fetching:n,available:a}}=e;t.kits[s].fetching=n,void 0!==a&&(t.kits[s].available=a)},setUserSequences:(t,e)=>{let{payload:s}=e;t.userSequences=s}}}),N=()=>async(t,e)=>{try{const s=await caches.keys(),n=x(e().assets.kits);s.forEach(t=>{n[t]&&(n[t].available=!0)}),t(T.actions.setKits(n))}catch(s){console.log("cache unavailable")}},{setAvailable:M,setSynched:q,setFetchingSamples:A,setUserSequences:K}=T.actions;e.b=T.reducer},function(t,e,s){"use strict";s.d(e,"c",function(){return l}),s.d(e,"b",function(){return r}),s.d(e,"d",function(){return i}),s.d(e,"a",function(){return p}),s.d(e,"e",function(){return d});var n=s(2),a=s(23),o=s.n(a),c=s(0);const l=()=>o.a.get("".concat(c.b,"/user"),{withCredentials:!0,headers:{authorization:"Bearer "+n.a.getState().app.authToken}}),r=t=>o()({url:"".concat(c.b,"/user/sequence"),method:"POST",data:{_id:t},withCredentials:!0}),i=t=>o()({url:"".concat(c.b,"/user/sequence/save"),method:"POST",data:t,withCredentials:!0,headers:{authorization:"Bearer "+n.a.getState().app.authToken}}),p=t=>o()({url:"".concat(c.b,"/user/sequence/delete"),method:"POST",data:{_id:t},withCredentials:!0,headers:{authorization:"Bearer "+n.a.getState().app.authToken}}),d=async t=>{const e=[];let s,n;t.forEach(t=>{e.push(fetch(t.path))});try{await Promise.all(e),s=!0}catch(a){n=a}finally{return[s,n]}}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});const n=(t,e)=>new Promise(s=>{setTimeout(()=>{e&&e(),s()},t)})},,,function(t,e,s){"use strict";s.r(e),s.d(e,"startTone",function(){return y}),s.d(e,"loadSamples",function(){return b}),s.d(e,"schedulePattern",function(){return g}),s.d(e,"startSequence",function(){return C}),s.d(e,"stopSequence",function(){return k}),s.d(e,"incCycleCount",function(){return O}),s.d(e,"startRecord",function(){return w});var n=s(1),a=s(15),o=s(3),c=s(0),l=s(5);const r=t=>{const e=[];for(let[s,n]of t.samples.entries())l.a.samples[s]=Object(o.a)({},n),e.push(i(l.a.samples[s]));return e},i=t=>new Promise(e=>{t.sampler=new n.Sampler({urls:{C2:t.path},onload:()=>{t.channel=new n.Channel({volume:0,pan:0,channelCount:2}).connect(l.c),t.vol=p(t),t.pan=d(t),t.sampler.connect(t.channel),e()}})}),p=t=>({getRotaryVal:()=>{let e=4*t.channel.volume.value+100;return e>100&&(e=100),e},setValFromRotary:e=>{t.channel.set({volume:.25*(e-100)})}}),d=t=>({getRotaryVal:()=>50*t.channel.pan.value+50,setValFromRotary:e=>{e>40&&e<59?t.channel.set({pan:0}):t.channel.set({pan:(e-50)/50})}});var u=s(9),m=s(19),S=s(6),h=s(7),v=s(21),f=s(2);const y=t=>async e=>{await n.start(),e(Object(u.e)(!0)),console.log("audio ready"),window.log("audio ready"),t&&e(C())},b=()=>async(t,e)=>{t(k());const s=e().sequence.present.kit,n=e().assets.kits[s];t(Object(S.p)("Loading samples: ".concat(s)));let a=n.available;t(Object(m.c)({kit:s,fetching:!0,available:a}));let o={bufferedKit:l.a.name,loadingError:!1};t(Object(u.h)(!0));try{l.a.samples[0].sampler&&(()=>{for(let s of l.a.samples){var t,e;null===(t=s.sampler)||void 0===t||t.dispose(),delete s.sampler,null===(e=s.channel)||void 0===e||e.dispose(),delete s.channel}l.a.samples.length=0})(),await(t=>new Promise(async(e,s)=>{const n=r(t);try{let t=setTimeout(()=>s("timed out loading samples"),c.c);await Promise.all(n),clearTimeout(t),console.log("".concat(l.a.name," buffers loaded!")),e()}catch(a){console.error("buildSamplers error -> ",a),s("error loading samples")}}))(n),e().sequence.present.sampleMixer.forEach((t,e)=>{let{vol:s,pan:n}=t;l.a.samples[e].vol.setValFromRotary(s),l.a.samples[e].pan.setValFromRotary(n)}),a=!0,o.bufferedKit=s,o.buffersLoaded=!0,o.message=s+" samples loaded"}catch(i){console.error("loadSamples ->\n",i),o.buffersLoaded=!1,o.loadingError=!0,o.message="Error loading ".concat(s," samples")}finally{o.loadingSamples=!1,t(Object(u.c)(o)),t(Object(m.c)({kit:s,fetching:!1,available:a})),t(Object(S.p)(o.message))}},g=(t,e)=>{n.Transport.scheduleRepeat(s=>{const o=e().tone.step,c=e().sequence.present.pattern[o],r=e().editor.mode===h.c.TAP_RECORD;try{((t,e)=>{for(const[s,{noteOn:a,notes:o}]of Object.entries(e))if(a){let e=o.length;l.a.samples[s].sampler.triggerAttackRelease(o[0].pitch,o[0].length,t,o[0].velocity),2===e?l.a.samples[s].sampler.triggerAttackRelease(o[1].pitch,o[1].length,t+n.Time("32n"),o[1].velocity):3===e&&(l.a.samples[s].sampler.triggerAttackRelease(o[1].pitch,o[1].length,t+n.Time("32t"),o[1].velocity),l.a.samples[s].sampler.triggerAttackRelease(o[2].pitch,o[2].length,t+n.Time("32t")+n.Time("32t"),o[2].velocity))}})(s,c),r&&((t,e)=>{e%16===0?l.e.triggerAttack("C2",t):e%4===0&&l.e.triggerAttack("C1",t)})(s,o),Object(a.b)(s,document.getElementById("cell-".concat(o))),Object(a.c)(s,c)}catch(i){console.error("scheduleRepeat passed buffer interrupt")}o===e().sequence.present.length-1?(t(O()),t(Object(u.j)(0))):t(Object(u.j)(o+1))},"16n")},C=t=>async(e,s)=>{if(!s().tone.audioContextReady)return e(y(!0));const o=s().editor.mode;Object(a.e)(s().sequence.present.length,s().tone.step),"stopped"===n.Transport.state&&g(e,s),o===h.c.TAP_RECORD&&await x(),e(Object(u.l)(t))},k=()=>(t,e)=>{j(),Object(a.e)(e().sequence.present.length,e().tone.step),Object(a.g)(),t(Object(u.n)())},O=()=>(t,e)=>{const s=e().tone.cycle,n=e().tone.stopAfterCycle;t(n&&s===n?k():Object(u.g)(s+1))},j=()=>{n.Transport.stop(),n.Transport.position=0,n.Transport.cancel(0);const t=n.Transport._scheduledEvents;Object.keys(t).forEach(t=>n.Transport.clear(t))},w=()=>t=>{t(Object(u.f)("...")),t(k()),t(C())},x=()=>new Promise(async t=>{const e=6e4/n.Transport.bpm.value;await Object(v.a)(0,()=>E("C2")),f.a.dispatch(Object(u.f)(4)),await Object(v.a)(e,()=>E("C1")),f.a.dispatch(Object(u.f)(3)),await Object(v.a)(e,()=>E("C1")),f.a.dispatch(Object(u.f)(2)),await Object(v.a)(e,()=>E("C1")),f.a.dispatch(Object(u.f)(1)),await Object(v.a)(e-100,t),f.a.dispatch(Object(u.f)(""))}),E=t=>{const e=document.getElementById("cell-0");e.classList.add("countIn"),setTimeout(()=>e.classList.remove("countIn"),100),l.e.triggerAttack(t,n.immediate())}},,,,,,function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s(13),a=s(36),o=s.n(a),c=s(34),l=s(10);const r=t=>{let{fwdRef:e,id:s,classes:a="",disabled:r=!1,startFunc:i,onClick:p,type:d,ariaLabel:u="",children:m}=t;const S=Object(n.useRef)(null),h=e||S,[v,f]=Object(n.useState)(""),y=t=>{f("")},{onTouchStart:b,onMouseDown:g}=Object(c.a)(t=>{i&&i(t),f(" pressed")});return Object(l.jsx)("button",{ref:h,type:d||"button",id:s||o.a.slug(),className:"btn "+a+v,disabled:r,"aria-label":u,onTouchStart:b,onMouseDown:g,onTouchEnd:y,onMouseUp:y,onClick:p,children:m})}},function(t,e,s){"use strict";s.d(e,"b",function(){return C}),s.d(e,"c",function(){return k}),s.d(e,"a",function(){return O}),s.d(e,"r",function(){return x}),s.d(e,"A",function(){return E}),s.d(e,"z",function(){return T}),s.d(e,"s",function(){return N}),s.d(e,"k",function(){return M}),s.d(e,"l",function(){return q}),s.d(e,"j",function(){return A}),s.d(e,"u",function(){return K}),s.d(e,"q",function(){return I}),s.d(e,"o",function(){return L}),s.d(e,"x",function(){return R}),s.d(e,"n",function(){return P}),s.d(e,"h",function(){return _}),s.d(e,"g",function(){return F}),s.d(e,"d",function(){return B}),s.d(e,"e",function(){return V}),s.d(e,"v",function(){return W}),s.d(e,"w",function(){return z}),s.d(e,"f",function(){return H}),s.d(e,"y",function(){return U}),s.d(e,"m",function(){return Q}),s.d(e,"p",function(){return X}),s.d(e,"t",function(){return Z});var n={};s.r(n),s.d(n,"loadInitialSequence",function(){return h}),s.d(n,"recordSample",function(){return v}),s.d(n,"modCell",function(){return f});var a=s(3),o=s(12),c=s(22),l=s.n(c),r=s(17),i=s(11),p=s(8),d=s(7),u=s(20),m=s(6),S=s(21);const h=(t,e)=>async s=>{if(s(Object(m.k)(!0)),"session"===t)s(P(O));else try{const e=(await Object(u.b)(t)).data;e.mainMixer=Object(p.b)(e.mainMixerStr),e.sampleMixer=Object(p.e)(e.sampleMixerStr),e.pattern=Object(p.d)(e.patternStr),s(P(e))}catch(n){console.log("Failed to load sequence from url path.  Loading default session."),s(P(O))}s(Object(m.k)(!1)),s(c.ActionCreators.clearHistory()),e()},v=t=>(e,s)=>{if("started"!==s().tone.transportState)return;const n=s().sequence.present;let a=s().tone.step-1;-1===a&&(a=s().sequence.present.length-1);n.pattern[a][t].noteOn||Object(S.a)(150,()=>e(K({sample:t,step:a})))},f=(t,e)=>(s,n)=>{const a=n().editor.selectedSample,o=n().editor.mode;switch(o){case d.c.INIT:case d.c.TAP:case d.c.TAP_RECORD:s(Object(m.l)(!0)),setTimeout(()=>s(Object(m.l)(!1)),0);break;case d.c.PAINT:const c=n().editor.toggleOn;(c&&!e||!c&&e)&&s(x({step:t,selectedSample:a,noteOn:c}));break;case d.c.ERASE:e&&s(M({step:t,selectedSample:a}));break;case d.c.SLICE:e&&s(E({step:t,selectedSample:a}));break;case d.c.MOD_LENGTH:case d.c.MOD_PITCH:case d.c.MOD_VELOCITY:if(e){const e=n().editor.mods[o];s(I({step:t,selectedSample:a,type:o,value:e}))}break;default:return null}},y=Object(i.b)("sequencePattern")||Object(p.d)(r.a.patternStr),b=Object(i.b)("mainMixer")||Object(p.b)(r.a.mainMixerStr),g=Object(i.b)("sampleMixer")||Object(p.e)(r.a.sampleMixerStr),C={volume:{min:1,max:100,initialValue:76,snapback:!1},reverb:{min:0,max:100,initialValue:0,snapback:!1},filter:{min:1,max:100,initialValue:100,snapback:!1},warp:{min:0,max:100,initialValue:50,snapback:!0},crush:{min:0,max:100,initialValue:0,snapback:!1},distort:{min:0,max:100,initialValue:0,snapback:!1}},k={vol:{min:1,max:100,initialValue:100},pan:{min:0,max:100,initialValue:50}},O={_id:Object(i.b)("sequenceId")||r.a._id,name:Object(i.b)("sequenceName")||r.a.name,kit:Object(i.b)("sequenceKitName")||r.a.kit,bpm:Object(i.b)("sequenceBpm")||r.a.bpm,length:Object(i.b)("sequenceLength")||r.a.length,pattern:y,mainMixer:b,sampleMixer:g},j=Object(a.a)(Object(a.a)({},O),{},{noteTally:Object(p.c)(y),undoStatus:"",initialLoad:!0}),w=Object(o.b)({name:"sequence",initialState:j,reducers:{paintCell:(t,e)=>{let{payload:{step:s,selectedSample:n,noteOn:a}}=e;t.pattern[s][n].noteOn=a,a?Object(p.i)(t.noteTally,n):Object(p.a)(t.noteTally,n),t.undoStatus="toggle cells | sample: ".concat(n)},sliceCell:(t,e)=>{let{payload:{step:s,selectedSample:n}}=e,a=t.pattern[s][n].notes;const o=a.length,c=a[0];3===o&&(a.length=0),a.push(c),t.undoStatus="slice cells | sample: ".concat(n)},resetSlice:(t,e)=>{let{payload:s}=e;t.pattern.forEach(t=>{const e=t[s].notes[0];t[s].notes.length=0,t[s].notes.push(e)})},paste:(t,e)=>{let{payload:{sample:s,selectedSample:n}}=e;t.pattern.forEach(t=>{t[s].noteOn=t[n].noteOn,t[s].notes=t[n].notes.map(t=>Object(a.a)({},t))}),t.noteTally.total.count+=t.noteTally[n].count-t.noteTally[s].count,t.noteTally[s]=Object(a.a)({},t.noteTally[n]),t.undoStatus="copy cells from: ".concat(n," to: ").concat(s)},eraseCell:(t,e)=>{let{payload:{step:s,selectedSample:n}}=e;Object(p.j)(t.pattern[s][n]),Object(p.a)(t.noteTally,n),t.undoStatus="erase cells | sample: ".concat(n)},eraseSample:(t,e)=>{let{payload:{selectedSample:s}}=e;t.pattern.forEach(t=>{Object(p.j)(t[s])}),t.noteTally.total.count-=t.noteTally[s].count,t.noteTally[s].count=0,t.noteTally[s].empty=!0,t.undoStatus="erase all cells | sample: ".concat(s)},eraseAll:t=>{t.pattern.forEach(t=>{t.forEach(t=>{Object(p.j)(t)})}),Object.keys(t.noteTally).forEach(e=>{t.noteTally[e].count=0,t.noteTally[e].empty=!0}),t.noteTally.total.count=0,t.noteTally.total.empty=!0,t.mainMixer=Object(p.b)("init"),t.sampleMixer=Object(p.e)("init"),t.undoStatus="erase sequence"},recordSampleFinally:(t,e)=>{let{payload:{sample:s,step:n}}=e;t.pattern[n][s].noteOn=!0,Object(p.i)(t.noteTally,s),t.undoStatus="record"},modCellFinally:(t,e)=>{let{payload:{selectedSample:s,type:n,value:a,step:o}}=e;n===d.c.MOD_LENGTH&&a<1&&(a*=.25),t.pattern[o][s].notes.forEach(t=>{t[n]=a}),t.undoStatus="modify cells | sample: ".concat(s)},modAll:(t,e)=>{let{payload:{selectedSample:s,type:n,value:a}}=e;n===d.c.MOD_LENGTH&&a<1&&(a*=.25),t.pattern.forEach(t=>{t[s].noteOn&&t[s].notes.forEach(t=>{t[n]=a})}),t.undoStatus="modify all cells | sample: ".concat(s)},resetMods:(t,e)=>{let{payload:{selectedSample:s,type:n}}=e;t.pattern.forEach(t=>{t[s].notes.forEach(t=>{t[n]=d.b[n]})}),t.undoStatus="reset cell mods | sample: ".concat(s)},loadSequence:(t,e)=>{let{payload:s}=e;t._id=s._id,t.name=s.name,t.kit=s.kit,t.bpm=s.bpm,t.length=s.length,t.mainMixer=s.mainMixer,t.sampleMixer=s.sampleMixer,t.pattern=s.pattern,t.noteTally=Object(p.c)(t.pattern),t.undoStatus="load sequence: ",t.initialLoad=!1},changeKit:(t,e)=>{let{payload:s}=e;t.kit=s,t.undoStatus="load kit: "},changeBpm:(t,e)=>{let{payload:s}=e;t.bpm=s,t.undoStatus="change bpm: "},adjustMainMixer:(t,e)=>{let{payload:{property:s,amount:n}}=e;const{min:a,max:o}=C[s];let c=t.mainMixer[s]+n;c<a&&(c=a),c>o&&(c=o),t.mainMixer[s]=c,t.undoStatus="main mixer | adjust ".concat(s)},adjustMainMixerWarp:(t,e)=>{let{payload:s}=e;const{min:n,max:a}=C.warp;let o=t.mainMixer.warp+s;o<n&&(o=n),o>a&&(o=a),t.mainMixer.warp=o},resetMainMixerProperty:(t,e)=>{let{payload:s}=e;t.mainMixer[s]=C[s].initialValue,t.undoStatus="main mixer | reset ".concat(s)},resetMainMixerWarp:t=>{t.mainMixer.warp=C.warp.initialValue},adjustSampleMixer:(t,e)=>{let{payload:{sample:s,property:n,amount:a}}=e;const{min:o,max:c}=k[n];let l=t.sampleMixer[s][n]+a;l<o&&(l=o),l>c&&(l=c),t.sampleMixer[s][n]=l,t.undoStatus="sample mixer | sample: ".concat(s," ").concat(n)},resetSampleMixerProperty:(t,e)=>{let{payload:{sample:s,property:n}}=e;t.sampleMixer[s][n]=k[n].initialValue,t.undoStatus="sample mixer | reset ".concat(n)}}}),{paintCell:x,sliceCell:E,resetSlice:T,paste:N,eraseCell:M,eraseSample:q,eraseAll:A,recordSampleFinally:K,modCellFinally:I,modAll:L,resetMods:R,loadSequence:P,loadSequenceFinally:D,changeKit:_,changeBpm:F,setInitialLoad:G,adjustMainMixer:B,adjustMainMixerWarp:V,resetMainMixerProperty:W,resetMainMixerWarp:z,adjustSampleMixer:H,resetSampleMixerProperty:U}=w.actions,{loadInitialSequence:Q,modCell:X,recordSample:Z}=n,J=l()(w.reducer,{groupBy:Object(c.groupByActionTypes)(["sequence/paintCell","sequence/eraseCell","sequence/sliceCell","sequence/modCell","sequence/recordSampleFinally","sequence/adjustMainMixer","sequence/adjustSampleMixer"]),filter:Object(c.excludeAction)(["sequence/adjustMainMixerWarp","sequence/resetMainMixerWarp"]),limit:100});e.i=J},function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s(25),a=s.n(n);const o=t=>{let{targetId:e,children:s}=t;const n=document.getElementById(e);return n?a.a.createPortal(s,n):null}},function(t,e,s){"use strict";s.d(e,"a",function(){return n});const n=t=>{const e=[];for(let s=0;s<t;s++)e.push(s);return e}},function(t,e,s){"use strict";s.d(e,"a",function(){return a});var n=s(13);const a=(t,e,s)=>{const[a,o]=Object(n.useState)(!1),c=Object(n.useRef)(null),l=t=>{a||e&&c.current&&e(t)},r=t=>{a||(s&&s(t),c.current=!1,document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",l))};return{onTouchStart:e=>{o(!0),t&&t(e)},onMouseDown:e=>{a||(t&&t(e),c.current=!0,document.addEventListener("mouseup",r),document.addEventListener("mousemove",l))},onTouchMove:t=>{e&&e(t)},onTouchEnd:t=>{s&&s(t)}}}},function(t,e,s){"use strict";s.d(e,"a",function(){return r}),s.d(e,"c",function(){return h}),s.d(e,"d",function(){return v});var n,a=s(12),o=s(2),c=s(11),l=s(15);const r={BARS:"bars",WAVE:"wave",RIPPLE:"ripple",GEMINI:"gemini"},i=()=>{const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight,s=t>e;let n=s?.85*e:.9*e;n<e-100&&(n=e-100);let a=t;return t>1440&&(a=t-(t-1440)),{vw:t,vh:e,appRight:a,landscape:s,mainContainerHeight:n}},p=i(),d=p.mainContainerHeight>500&&p.landscape,u={dimensions:p,splitSamplePanel:d,analyzer:{on:null!==(n=Object(c.b)("analyzerOn"))&&void 0!==n?n:d,mode:Object(c.b)("analyzerMode")||r.BARS}},m=Object(a.b)({name:"screen",initialState:u,reducers:{setDimensions:t=>{t.dimensions=i(),t.splitSamplePanel=t.dimensions.mainContainerHeight>500&&t.dimensions.landscape},setAnalyzerOnFinally:(t,e)=>{let{payload:s}=e;t.analyzer.on=s},setAnalyzerOn:(t,e)=>{let{payload:s}=e;t.analyzer.on=s,t.analyzer.on?Object(l.f)():Object(l.h)()},setAnalyzerMode:(t,e)=>{let{payload:s}=e;t.analyzer.mode=s,t.analyzer.on=!0}}}),{setDimensions:S,setAnalyzerMode:h,setAnalyzerOn:v}=m.actions;let f;e.b=m.reducer,window.addEventListener("resize",C),window.addEventListener("orientationchange",function(){k(),window.location.reload()}),window.addEventListener("blur",()=>{window.addEventListener("focus",k)});let y=null;const b=document.getElementById("root"),g=document.getElementById("preparingPortal");function C(){document.documentElement.clientWidth!==y&&(clearTimeout(f),b.style.display="none",g.style.display="initial",f=setTimeout(k,350))}function k(){setTimeout(function(){g.style.display="none",b.style.display="initial",document.body.style.display="none",document.body.style.display="initial",o.a.dispatch(S()),y=document.documentElement.clientWidth},0),window.removeEventListener("focus",k)}C()},,,function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s(13),a=s(33),o=s(30),c=s(32),l=s(10);const r=t=>{let{message:e="preparing...",targetId:s="preparingPortal",cancel:r}=t;const i=Object(n.useMemo)(()=>Object(a.a)(9),[]);return Object(l.jsx)(c.a,{targetId:s,children:Object(l.jsxs)("div",{id:"preparing",className:"preparing",children:[Object(l.jsx)("h1",{className:"prepHeader",children:"Sequencer64"}),Object(l.jsx)("div",{className:"prepGrid",children:i.map(t=>Object(l.jsx)("div",{className:"prepCell",children:Object(l.jsx)("div",{className:"prepBgColor prepBg".concat(t)})},"preparing-cell-".concat(t)))}),Object(l.jsx)("p",{className:"prepMsgContainer",children:Object(l.jsx)("span",{className:"prepMsg",children:e})}),r&&Object(l.jsx)(o.a,{onClick:r,children:"cancel"})]})})}},,,,,,,,,,,,function(t,e,s){"use strict";s.r(e),s.d(e,"saveSequence",function(){return p}),s.d(e,"deleteSequence",function(){return d}),s.d(e,"getUser",function(){return u});var n=s(20),a=s(16);const o=async t=>{const{cloudSeqs:e,idbSeqs:s,mergedSeqs:n,promises:o}=t;t.idbUpdate=!1;const c=await Object(a.a)("deleted");for(let a of e){const e=a._id.toString();c&&c.find(t=>t===e)?o.push(l(e)):(n[e]=a,n[e].synched=!0,e in s||(t.idbUpdate=!0))}},c=async t=>{const{idbSeqs:e,mergedSeqs:s,promises:a,loggedIn:o}=t;for(let c of e){const e=c._id.toString();if(!(e in s)){s[e]=c;const l=t._id.toString();s[e].synched=!1,(c.author.toString()===l.toString()||c.sharedWith.find(t=>t.toString()===l.toString()))&&o&&(s[e].synched=!0,a.push(Object(n.d)(c)))}}},l=t=>new Promise(async(e,s)=>{if((await Object(n.a)(t)).status<400){const s=await Object(a.a)("deleted");if(s){const e=s.indexOf(t);-1!==e&&s.splice(e,1),await Object(a.b)("deleted",s)}e()}else s("failed to update cloud")});var r=s(6),i=s(19);const p=t=>async(e,s)=>{e(Object(r.k)(!0));const o={message:"",confirmation:"",error:"",newSequences:[...s().assets.userSequences]};try{await(async(t,e)=>{e.push(t),await Object(a.b)("sequences",e)})(t,o.newSequences),o.message="success!",o.confirmation="succesfully saved ".concat(t.name," to device"),await Object(n.d)(t),o.confirmation+=" and cloud",t.synched=!0}catch(c){o.message?o.message="updated local database":(o.message="unsuccessful :(",o.error="Error: Please try again later")}finally{e(Object(i.e)(o.newSequences)),e(Object(r.r)(o))}},d=t=>async(e,s)=>{e(Object(r.k)(!0));const o={message:"",error:"",newSequences:[...s().assets.userSequences]};try{await(async(t,e)=>{let s=!1;e.forEach((n,a)=>{n._id.toString()===t.toString()&&(e.splice(a,1),s=!0)}),s&&await Object(a.b)("sequences",e)})(t,o.newSequences),o.message="success!",await Object(n.a)(t)}catch(c){o.message?(o.message="updated local database",(async t=>{const e=await Object(a.a)("deleted");e?(e.push(t),await Object(a.b)("deleted",e)):await Object(a.b)("deleted",[t])})(t)):(o.message="unsuccessful :(",o.error="Error: Please try again later")}finally{e(Object(i.e)(o.newSequences)),e(Object(r.r)(o))}},u=()=>async(t,e)=>{t(Object(r.k)(!0));let s={loggedIn:!1,_id:"",username:"",message:"",userSequences:[],promises:[]};try{await(async t=>{let e=[];try{const s=await Object(a.a)("username");t.username||(t.username=s||"");const n=await Object(a.a)("sequences");n&&(e=n),t.message||(t.message="user data loaded from device")}catch(s){console.error("getUserFromIDB ->\n",s)}finally{t.idbSeqs=e}})(s),await(async t=>{t.mergedSeqs={},await o(t),await c(t),t.userSequences=Object.values(t.mergedSeqs),t.idbUpdate&&t.promises.push(Object(a.b)("sequences",t.userSequences))})(s)}catch(n){console.error("getUser ->\n",n),s.message="No user data"}finally{t(Object(i.e)(s.userSequences)),t(Object(r.e)(s));if(e().app.online&&s.loggedIn&&s.promises.length>0)try{await Promise.all(s.promises),t(Object(r.p)("user data refreshed"))}catch(n){console.error("getUser | promises ->:\n",n)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,s){},,,,function(t,e,s){"use strict";s.r(e);var n=s(13),a=s.n(n),o=s(25),c=s.n(o),l=s(2),r=s(6);const i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(t,e){navigator.serviceWorker.register(t).then(t=>{l.a.dispatch(Object(r.o)(!0)),t.onupdatefound=()=>{const s=t.installing;null!=s&&(s.onstatechange=()=>{"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(t=>{console.error("Error during service worker registration:",t)})}var d=t=>{t&&t instanceof Function&&s.e(6).then(s.bind(null,113)).then(e=>{let{getCLS:s,getFID:n,getFCP:a,getLCP:o,getTTFB:c}=e;s(t),n(t),a(t),o(t),c(t)})},u=(s(80),s(38)),m=s(10);const S=a.a.lazy(()=>Promise.all([s.e(3),s.e(4)]).then(s.bind(null,114)));c.a.render(Object(m.jsx)(a.a.Suspense,{fallback:Object(m.jsx)(u.a,{}),children:Object(m.jsx)(S,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/gemini-sequencer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/gemini-sequencer","/service-worker.js");i?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(s=>{const n=s.headers.get("content-type");404===s.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(t=>{t.unregister().then(()=>{window.location.reload()})}):p(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):p(e,t)})}}(),d()}],[[84,1,2]]]);
//# sourceMappingURL=main.72028239.chunk.js.map